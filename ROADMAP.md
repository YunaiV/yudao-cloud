# Roadmap for Adapting CRMEB to the Algerian Market

This document outlines the strategic roadmap for adapting the CRMEB application to the specific needs and requirements of the Algerian market.

## Phase 1: Backend Modifications

### 1. Payment Gateway Integration

To integrate with Algerian payment gateways (e.g., CIB, edahabia), a new payment client implementation is required. Based on the existing Alipay integration, the following steps should be taken:

*   **Create a New Payment Client:** In the `yudao-module-pay` microservice, create a new package for the Algerian payment gateway under `cn.iocoder.yudao.module.pay.framework.pay.core.client.impl`.
*   **Implement `PayClient`:** Develop a new class that extends `AbstractPayClient` and implements the necessary methods for processing payments, refunds, and other gateway-specific operations.
*   **Configuration:** Create a new configuration class for the payment gateway, similar to `AlipayPayClientConfig.java`.
*   **Factory Integration:** Register the new payment client in `PayClientFactoryImpl.java` to make it available to the application.
*   **Channel Enum:** Add the new payment gateway to the `PayChannelEnum.java` to allow for its selection in the admin panel.

### 2. Currency and Tax Adaptation

The application needs to be updated to support the Algerian Dinar (DZD) and the local tax system.

*   **Currency Support:** Since prices are stored as integers (in the smallest currency unit), no database schema changes are required. The frontend will be responsible for formatting the currency correctly. A new currency utility class should be created to handle DZD-specific formatting.
*   **Tax Implementation:** The existing tax calculation logic in the `yudao-module-erp` microservice can be extended. A new tax service should be created to implement the Algerian tax rules (TVA). This service will be used in the ERP and e-commerce modules to calculate taxes on products and services.

### 3. Customer Data Format Changes

The `CrmCustomerDO` entity needs to be updated to better support Algerian address and phone number formats.

*   **Address Fields:** The current address implementation uses `areaId` and a single `detailAddress` field. This should be expanded to include dedicated fields for `street`, `city`, `state`, `postalCode`, and `country` to align with Algerian and international standards. A data migration script will be required to populate the new fields from the existing `detailAddress` data.
*   **Phone Number Fields:** A dedicated `countryCode` field should be added to the customer entity to store the international dialing code, ensuring phone numbers are stored in a standardized format.

### 4. Backend Internationalization (i18n)

To support Arabic and French in the backend, the following steps are required:

*   **Implement i18n Framework:** Since no existing i18n framework was found, a new one needs to be implemented. Spring's built-in `ResourceBundleMessageSource` is a good choice.
*   **Externalize Strings:** All user-facing strings in the backend code (e.g., error messages, notifications) must be externalized into `.properties` files.
*   **Create Translation Files:** Create `messages_ar.properties` and `messages_fr.properties` files for Arabic and French translations, respectively.

## Phase 2: Frontend Modifications

### 1. Frontend Localization (L10n)

The frontend application (`yudao-ui-admin-vue3`) needs to be localized for the Algerian market.

*   **Integrate `vue-i18n`:** The `vue-i18n` library should be integrated into the project to manage translations.
*   **Create Translation Files:** Create `ar.json` and `fr.json` files to store the Arabic and French translations for all UI components.
*   **Implement Right-to-Left (RTL) Support:** For the Arabic language, the application's CSS needs to be updated to support RTL layouts. This will involve creating a separate RTL stylesheet that overrides the default LTR styles.
*   **Language Selector:** Add a language selector to the UI to allow users to switch between English, Arabic, and French.

## Phase 3: Legal and Deployment

### 1. Legal Compliance

*   **Invoicing:** Ensure that invoices and receipts generated by the system comply with Algerian regulations, including the display of tax information and other mandatory details.
*   **Data Privacy:** The application must comply with Algerian data privacy laws. This may require updating the privacy policy and ensuring that user data is handled in a compliant manner.

### 2. Deployment Strategy

*   **Hosting:** The application should be hosted on a cloud provider with data centers in or near Algeria to ensure optimal performance for local users.
*   **Domain:** Register a country-specific domain (e.g., `.dz`) to build trust with local users.
*   **CI/CD:** The CI/CD pipeline should be updated to support the new deployment environment and to automate the deployment of the localized application.
